---
title: Validation
description: Using ArkType for runtime validation and typesafety in Bedstack.
---

Bedstack uses **[ArkType](https://arktype.io/)** for runtime validation. ArkType is a high-performance validation library that allows you to define schemas that 1:1 match TypeScript types.

## Why ArkType?

- **Performance**: ArkType is significantly faster than many common validation libraries.
- **Inference**: Excellent type inferenceâ€”your schemas *are* your types.
- **Syntax**: Concise and expressive object and string-based syntax.
- **Natural**: Scales naturally from simple types to complex unions and intersections.

## Defining Schemas

Schemas are typically defined in `dto` folders within each feature.

```typescript
import { type } from 'arktype';

export const CreateUserDto = type({
  user: {
    email: 'string.email',
    password: 'string >= 8',
    username: 'string',
    'bio?': 'string', // ? denotes optional property
    'image?': 'string.url',
  },
});

// Infer the TypeScript type from the schema
export type CreateUserDto = typeof CreateUserDto.infer;
```

## Using Schemas in Elysia

Elysia supports ArkType out of the box. You can pass the schema to the `body`, `query`, or `params` options of a route.

```typescript
import { Elysia } from 'elysia';
import { CreateUserDto } from './dto/create-user.dto';

export const usersController = new Elysia({ prefix: '/users' })
  .post('/', ({ body }) => {
    // body is already validated and typed!
    const { email, username } = body.user;
    return { email, username };
  }, {
    body: CreateUserDto
  });
```

## Advanced Validation

ArkType allows for complex validations using regex and logical operators.

```typescript
import { regex } from 'arkregex';
import { type } from 'arktype';

export const ComplexSchema = type({
  username: type(regex('^[a-zA-Z0-9_-]+$'))
    .and('3 <= string <= 50')
    .describe('3-50 characters, letters, numbers, underscores, and hyphens'),
});
```

The `.describe()` method is particularly useful as Bedstack uses it to provide descriptive error messages when validation fails.
